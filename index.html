<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>치과 치료 계산기</title>
    <style>
        /* --- 기본 스타일링 --- */
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f4f7f6;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* --- 헤더 스타일 --- */
        .main-header {
            background-color: #005aab;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            border-radius: 4px;
        }

        .sub-header {
            background-color: #6c757d;
            color: white;
            padding: 10px 15px;
            margin-top: 20px;
            font-size: 16px;
            border-radius: 4px;
        }

        /* --- 테이블 스타일 --- */
        .treatment-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            /* 중요: 테이블 셀 너비가 내용에 따라 변하지 않도록 고정합니다. (테이블 밀림 현상 방지) */
            table-layout: fixed;
        }

        .treatment-table th, .treatment-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: center;
            vertical-align: middle; /* 내용을 세로 중앙 정렬 */
        }

        .treatment-table thead th {
            background-color: #ffc107;
            color: #333;
            font-weight: bold;
        }

        /* --- 테이블 내부 요소 스타일 --- */
        .treatment-table input[type="text"], .treatment-table select {
            width: 95%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .tooth-number {
            font-weight: bold;
        }

        /* --- 행(Row) 그룹핑 스타일 --- */
        .tooth-group-cell {
            font-weight: bold;
            background-color: #f8f9fa;
        }

        /* --- 비용 및 버튼 스타일 --- */
        .cost-cell {
            font-weight: bold;
            text-align: right;
            padding-right: 20px;
        }

        .action-button {
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            font-size: 18px;
            cursor: pointer;
            border-radius: 4px;
        }
        .action-button.plus { color: #007bff; }
        .action-button.minus { color: #dc3545; }

        /*
         * 요청사항 2번: '집중관리 요망' 선택 시 번호 셀에 적용될 하이라이트 스타일
         * !important를 사용하여 다른 스타일보다 우선 적용되도록 합니다.
        */
        .highlight-intensive-care {
            background-color: #FF0000 !important; /* 새빨간 색 배경 */
            color: #FFFFFF !important;            /* 흰색 글자 */
            font-weight: bold !important;         /* 굵은 글씨체 */
        }
    </style>
</head>
<body>

<div class="container">
    <div class="main-header">좌 상악 & 하악</div>

    <!-- 좌 상악 테이블 -->
    <div class="sub-header">좌 상악 (200번대)</div>
    <table class="treatment-table">
        <colgroup>
            <col style="width: 10%;">
            <col style="width: 10%;">
            <col style="width: 30%;">
            <col style="width: 30%;">
            <col style="width: 15%;">
            <col style="width: 5%;">
        </colgroup>
        <thead>
            <tr>
                <th colspan="2">번호</th>
                <th>특이사항</th>
                <th>시술 선택</th>
                <th>비용</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td rowspan="3" class="tooth-group-cell">앞니</td>
                <td class="tooth-number">201</td>
                <td><input type="text" value="특이사항 입력"></td>
                <td>
                    <select class="procedure-select">
                        <option value="수술-뿌리1">수술-뿌리1</option>
                        <option value="기본-뿌리1">기본-뿌리1</option>
                        <option value="유치-송곳니(X-ray)">유치-송곳니(X-ray)</option>
                        <option value="집중관리 요망">집중관리 요망</option>
                    </select>
                </td>
                <td class="cost-cell">₩44,000</td>
                <td><button class="action-button plus">+</button></td>
            </tr>
            <tr>
                <td class="tooth-number">202</td>
                <td><input type="text" value="특이사항 입력"></td>
                <td>
                    <select class="procedure-select">
                        <option value="기본-뿌리1">기본-뿌리1</option>
                        <option value="수술-뿌리1">수술-뿌리1</option>
                        <option value="유치-송곳니(X-ray)">유치-송곳니(X-ray)</option>
                        <option value="집중관리 요망">집중관리 요망</option>
                    </select>
                </td>
                <td class="cost-cell">₩22,000</td>
                <td><button class="action-button plus">+</button></td>
            </tr>
             <tr>
                <td class="tooth-number" style="background-color: pink;">604</td>
                <td><input type="text" value="특이사항 입력"></td>
                <td>
                    <select class="procedure-select">
                        <option value="유치-송곳니(X-ray)">유치-송곳니(X-ray)</option>
                        <option value="수술-뿌리1">수술-뿌리1</option>
                        <option value="기본-뿌리1">기본-뿌리1</option>
                        <option value="집중관리 요망">집중관리 요망</option>
                    </select>
                </td>
                <td class="cost-cell">₩33,000</td>
                <td><button class="action-button minus">-</button></td>
            </tr>
            <tr>
                <td rowspan="2" class="tooth-group-cell" style="background-color: #e2f0d9;">207</td>
                <td class="tooth-number">특이사</td>
                <td>
                    <select class="procedure-select">
                        <option value="치근활택술">치근활택술</option>
                        <option value="집중관리 요망">집중관리 요망</option>
                    </select>
                </td>
                <td></td>
                <td class="cost-cell">₩45,000</td>
                <td><button class="action-button plus">+</button></td>
            </tr>
             <tr>
                <td class="tooth-number">특이사</td>
                 <td>
                    <select class="procedure-select">
                        <option value="미노클린">미노클린</option>
                        <option value="집중관리 요망">집중관리 요망</option>
                    </select>
                </td>
                <td></td>
                <td class="cost-cell">₩22,000</td>
                <td><button class="action-button minus">-</button></td>
            </tr>
        </tbody>
    </table>

    <!-- 좌 하악 테이블 -->
    <div class="sub-header">좌 하악 (300번대)</div>
    <table class="treatment-table">
        <colgroup>
            <col style="width: 10%;">
            <col style="width: 10%;">
            <col style="width: 30%;">
            <col style="width: 30%;">
            <col style="width: 15%;">
            <col style="width: 5%;">
        </colgroup>
        <thead>
            <tr>
                <th colspan="2">번호</th>
                <th>특이사항</th>
                <th>시술 선택</th>
                <th>비용</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <!-- 좌 하악 데이터 행 추가 영역 -->
            <tr>
                <td colspan="6" style="padding: 30px; color: #888;">내용 없음</td>
            </tr>
        </tbody>
    </table>
</div>

<script>
/**
 * 웹 페이지의 모든 콘텐츠(HTML)가 로드된 후 스크립트를 실행합니다.
 * DOMContentLoaded 이벤트는 HTML 구조가 준비되었을 때 발생하므로,
 * 스크립트가 DOM 요소를 안전하게 조작할 수 있게 합니다.
 */
document.addEventListener('DOMContentLoaded', function() {

    /**
     * 시술 선택(select) 요소의 값이 변경될 때마다 하이라이트 스타일을 적용/제거하는 함수입니다.
     * @param {Event} event - select 요소에서 발생한 'change' 이벤트 객체
     */
    function handleProcedureChange(event) {
        // 이벤트가 발생한 <select> 요소를 가져옵니다.
        const selectElement = event.target;
        // 선택된 <option>의 값을 가져옵니다.
        const selectedValue = selectElement.value;

        // <select> 요소를 감싸고 있는 가장 가까운 테이블 행(<tr>)을 찾습니다.
        const tableRow = selectElement.closest('tr');
        if (!tableRow) {
            // 행을 찾지 못하면 아무 작업도 하지 않고 함수를 종료합니다.
            return;
        }

        // 해당 행(tr) 내에서 '번호'를 표시하는 셀(td)을 찾습니다.
        // 여기서는 두 번째 td를 번호 셀로 간주합니다. (첫 번째는 그룹명 셀)
        // 더 안정적인 방법은 <td class="tooth-number-cell"> 과 같이 클래스를 부여하고
        // tableRow.querySelector('.tooth-number-cell') 로 찾는 것입니다.
        const numberCell = tableRow.querySelector('td:nth-child(2)');

        // 번호 셀이 존재하는지 다시 한번 확인합니다.
        if (numberCell) {
            // 선택된 값이 '집중관리 요망'인지 확인합니다.
            if (selectedValue === '집중관리 요망') {
                // '집중관리 요망'이 맞으면, CSS에 정의된 'highlight-intensive-care' 클래스를 추가합니다.
                numberCell.classList.add('highlight-intensive-care');
            } else {
                // 다른 옵션이 선택되면, 'highlight-intensive-care' 클래스를 제거하여 원래 스타일로 되돌립니다.
                numberCell.classList.remove('highlight-intensive-care');
            }
        }
    }

    // 페이지 내의 모든 시술 선택 드롭다운 메뉴를 찾습니다.
    // CSS 선택자 '.procedure-select'를 사용하여 HTML에서 해당 클래스를 가진 모든 <select> 요소를 가져옵니다.
    const allProcedureSelects = document.querySelectorAll('.procedure-select');

    // 찾은 모든 드롭다운 메뉴 각각에 'change' 이벤트 리스너를 추가합니다.
    // 사용자가 드롭다운 메뉴의 값을 변경할 때마다 위에서 정의한 handleProcedureChange 함수가 실행됩니다.
    allProcedureSelects.forEach(function(select) {
        select.addEventListener('change', handleProcedureChange);
    });

});
</script>

</body>
</html>
